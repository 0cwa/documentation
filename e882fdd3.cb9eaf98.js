(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{304:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return u}));var a=n(1),o=n(9),i=(n(0),n(329)),r={last_modified_on:"2020-10-05",title:"Policy",description:"Learn how to configure Policies in Qovery"},c={id:"using-qovery/configuration/business/policy",title:"Policy",description:"Learn how to configure Policies in Qovery",source:"@site/docs/using-qovery/configuration/business/policy.md",permalink:"/docs/using-qovery/configuration/business/policy",editUrl:"https://github.com/Qovery/documentation/edit/master/website/docs/using-qovery/configuration/business/policy.md",sidebar:"docs",previous:{title:"Business \u2b50\ufe0f",permalink:"/docs/using-qovery/configuration/business"},next:{title:"Organization",permalink:"/docs/using-qovery/configuration/business/organization"}},l=[{value:"Options",id:"options",children:[{value:"Branch",id:"branch",children:[]},{value:"Build platform",id:"build-platform",children:[]},{value:"Container registry",id:"container-registry",children:[]},{value:"Environment mode",id:"environment-mode",children:[]},{value:"Cluster",id:"cluster",children:[]},{value:"Monitoring",id:"monitoring",children:[]},{value:"TTL (Time to Live)",id:"ttl-time-to-live",children:[]},{value:"Startup cron",id:"startup-cron",children:[]},{value:"Shutdown cron",id:"shutdown-cron",children:[]},{value:"Manual spawn",id:"manual-spawn",children:[]}]},{value:"Policy scenarios",id:"policy-scenarios",children:[{value:"Reduce development environment costs",id:"reduce-development-environment-costs",children:[]},{value:"Reduce the risk of production outage",id:"reduce-the-risk-of-production-outage",children:[]},{value:"Synchronize the staging environment with the production environment",id:"synchronize-the-staging-environment-with-the-production-environment",children:[]}]}],b={rightToc:l};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Policy is a core concept of Qovery Business. It allows your team to customize the behaviours of the platform and adjust it perfectly to your organization's needs."),Object(i.b)("img",{src:"/img/policy-complete-flow.png"}),Object(i.b)("p",null,"For instance, you can create a rule to deploy the ",Object(i.b)("inlineCode",{parentName:"p"},"master")," ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/main-concepts/environment/"}),"environment")," into the AWS Cloud provider and by all apps contained into this environment with your Circle CI account."),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"Default policies are set-up when you create an organization for the first time"),". Then you can start to use Qovery Business in seconds."),Object(i.b)("h2",{id:"options"},"Options"),Object(i.b)("p",null,"Here is an exhaustive list of available policies options:"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"option"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"description"),Object(i.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"mandatory"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#branch"}),"branch")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"branch name predicate; can be a list of branches and * is allowed"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"yes")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#build-platform"}),"build platform")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"build platform to use to build and test the apps from the the environment"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"yes")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#container-registry"}),"container registry")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"once build, the container image must be pushed into a container registry"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"yes")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#environment-mode"}),"environment mode")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),'what is the mode of the environment ("development" or "production"). This choice affect the kind of resources provisioned'),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"yes")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#cluster"}),"cluster")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"on which cloud provider and cluster to run the environment"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"yes")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#monitoring"}),"monitoring")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"what is the monitoring platform to use"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"no")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#ttl-time-to-live"}),"TTL (Time To Live)")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"set how long the environment can live at maximum"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"no")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#startup-cron"}),"startup cron")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"set when an environment must be started"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"no")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#shutdown-cron"}),"shutdown cron")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"set when an environment must be shutdown"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"no")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(i.b)("a",Object(a.a)({parentName:"td"},{href:"/docs/using-qovery/configuration/business/policy/#manual-spawn"}),"manual spawn")),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"environment have to be manually started"),Object(i.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"no")))),Object(i.b)("p",null,"Those options bring you the ability to compose your deployment flow depending on your business, economic and legal criteria."),Object(i.b)("h3",{id:"branch"},"Branch"),Object(i.b)("p",null,"What is the branch name that must match to apply this policy."),Object(i.b)("p",null,"Examples:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"master"),": if the branch name is ",Object(i.b)("inlineCode",{parentName:"li"},"master")," then match the policy."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"main"),": if the branch name is ",Object(i.b)("inlineCode",{parentName:"li"},"main")," then match the policy."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"dev/*"),": if the branch name starts with ",Object(i.b)("inlineCode",{parentName:"li"},"dev/")," then match the policy (eg. dev/123 , dev/chat)."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"feat/*"),": if the branch name starts with ",Object(i.b)("inlineCode",{parentName:"li"},"feat/")," then match the policy (eg. feat/123 , feat/billing)."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"*"),": any branch match the policy.")),Object(i.b)("p",null,"One or more branch name per policy can be specified."),Object(i.b)("h3",{id:"build-platform"},"Build platform"),Object(i.b)("p",null,"Which ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/business/policy/#build-platform"}),"Build Platform")," do you choose to build and test your apps matching the policy."),Object(i.b)("p",null,"Do you have a CI?"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"If you do, ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/using-qovery/configuration/business/policy/#build-platform"}),"see if Qovery supports your CI"),"."),Object(i.b)("li",{parentName:"ul"},"If you do not, ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/using-qovery/configuration/business/build-platform/qovery-ci/"}),"Qovery provides a CI of the box")," (default).")),Object(i.b)("h3",{id:"container-registry"},"Container registry"),Object(i.b)("p",null,"In which ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/business/policy/#container-registry"}),"Container Registry")," the final container image must be pushed?\nYou can choose the one you want ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/business/container-registry/"}),"from this list"),". By selecting the one provided by your Cloud provider, you avoid paying for outgoing traffic."),Object(i.b)("h3",{id:"environment-mode"},"Environment mode"),Object(i.b)("p",null,"Choose between ",Object(i.b)("inlineCode",{parentName:"p"},"Production")," and ",Object(i.b)("inlineCode",{parentName:"p"},"Development")," environment mode."),Object(i.b)("h4",{id:"production-mode"},"Production mode"),Object(i.b)("p",null,"A production environment is where the app is configured to be highly performant, and the database highly resilient."),Object(i.b)("p",null,"E.g., If you run a NodeJS app and a PostgreSQL database in production mode:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"3 NodeJS app instances run at minimum and auto-scale according to the CPU and the RAM usage."),Object(i.b)("li",{parentName:"ul"},"for PostgreSQL, a managed database is used to provide the best performance and maximize the availability.")),Object(i.b)("p",null,"However, running in production cost much more than running in development mode."),Object(i.b)("h4",{id:"development-mode"},"Development mode"),Object(i.b)("p",null,"A development environment is where the app, and the database are configured to be cost effective."),Object(i.b)("p",null,"E.g., If you run a NodeJS app and a PostgreSQL database in development mode:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"1 NodeJS app instance run with the minimum CPU and RAM to avoid wasted resources."),Object(i.b)("li",{parentName:"ul"},"for PostgreSQL, a containerized database with local storage to lower the cost at the price of a standard app.")),Object(i.b)("p",null,"However, running in production cost much more than running in development mode."),Object(i.b)("h3",{id:"cluster"},"Cluster"),Object(i.b)("p",null,"In which Cluster your apps must run. If you have multiple clusters across different Cloud provider and regions, you can select the more appropriate.\nFor instance, this is common to separate the production from the development applications."),Object(i.b)("p",null,"Go into ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/business/cloud-account/"}),"Cloud account")," to configure your clusters."),Object(i.b)("h3",{id:"monitoring"},"Monitoring"),Object(i.b)("p",null,"Qovery allows you to add an ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/using-qovery/configuration/business/monitoring/"}),"external monitoring solution")," such as Datadog or Newrelic on the environment that match the policy. This makes it possible to monitor only what is strictly necessary."),Object(i.b)("h3",{id:"ttl-time-to-live"},"TTL (Time to Live)"),Object(i.b)("p",null,"The Time to Live (TTL) option delete or pause an environment after some time automatically. The minimum value is 1 minute. For instance, you can automatically delete an environment after 2 hours of run if no git event happens in the meantime. This option helps to reduce Cloud cost."),Object(i.b)("h3",{id:"startup-cron"},"Startup cron"),Object(i.b)("p",null,"This option wake up an environment at the specific date and time and can be repetitive. For instance, you can automatically start an environment from Monday to Friday at 8am PST. This option helps to reduce Cloud cost."),Object(i.b)("h3",{id:"shutdown-cron"},"Shutdown cron"),Object(i.b)("p",null,"This option shutdown an environment at the specific date and time and can be repetitive. For instance, you can automatically shutdown an environment from Monday to Friday at 7pm PST. This option helps to reduce Cloud cost."),Object(i.b)("h3",{id:"manual-spawn"},"Manual spawn"),Object(i.b)("p",null,"This option indicates if you prefer to manually start an environment or not."),Object(i.b)("h2",{id:"policy-scenarios"},"Policy scenarios"),Object(i.b)("h3",{id:"reduce-development-environment-costs"},"Reduce development environment costs"),Object(i.b)("p",null,"TODO"),Object(i.b)("h3",{id:"reduce-the-risk-of-production-outage"},"Reduce the risk of production outage"),Object(i.b)("p",null,"TODO"),Object(i.b)("h3",{id:"synchronize-the-staging-environment-with-the-production-environment"},"Synchronize the staging environment with the production environment"),Object(i.b)("p",null,"TODO"))}u.isMDXComponent=!0},329:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=o.a.createContext({}),u=function(e){var t=o.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},s=function(e){var t=u(e.components);return o.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,b=l(e,["components","mdxType","originalType","parentName"]),s=u(n),d=a,m=s["".concat(r,".").concat(d)]||s[d]||p[d]||i;return n?o.a.createElement(m,c({ref:t},b,{components:n})):o.a.createElement(m,c({ref:t},b))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var b=2;b<i;b++)r[b]=n[b];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);