<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<link rel="preconnect" href="https://phprox.qovery.com">
<script>!function(t,e){var o,p,i,n;e.__SV||(window.posthog=e,e._i=[],e.init=function(r,s,c){function a(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(i=t.createElement("script")).type="text/javascript",i.async=!0,i.src=s.api_host+"/static/array.js",(n=t.getElementsByTagName("script")[0]).parentNode.insertBefore(i,n);var g=e;for(void 0!==c?g=e[c]=[]:c="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==c&&(e+="."+c),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset".split(" "),p=0;p<o.length;p++)a(g,o[p]);e._i.push([r,s,c])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_IgdG1K2GveDUte1gJ6hlwNbFHCv9nViWETUyLMU7ciq",{api_host:"https://phprox.qovery.com"})</script>
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Qovery Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Qovery Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css">
<script src="/js/intercom.js"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=UA-129773960-5" async></script>
<script src="/js/ga.js"></script>

<title data-react-helmet="true">Best Practices and Tips for Writing a Dockerfile | Qovery</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Best Practices and Tips for Writing a Dockerfile | Qovery"><meta data-react-helmet="true" name="description" content="Best Practices and Tips for Writing a Dockerfile, in minutes, for free"><meta data-react-helmet="true" property="og:description" content="Best Practices and Tips for Writing a Dockerfile, in minutes, for free"><meta data-react-helmet="true" property="og:image" content="https://hub.qovery.com/img/open-graph.png"><meta data-react-helmet="true" property="twitter:image" content="https://hub.qovery.com/img/open-graph.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Best Practices and Tips for Writing a Dockerfile | Qovery"><meta data-react-helmet="true" property="og:url" content="https://docs.qovery.com/guides/engineering/best-practices-and-tips-for-writing-a-dockerfile/"><meta data-react-helmet="true" name="twitter:card" content="summary">

<link data-react-helmet="true" rel="shortcut icon" href="/img/logo-square.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.qovery.com/guides/engineering/best-practices-and-tips-for-writing-a-dockerfile/">


<link rel="stylesheet" href="/styles.846259e1.css">


<link rel="preload" href="/styles.ae5b223a.js" as="script">

<link rel="preload" href="/runtime~main.d21bfdd8.js" as="script">

<link rel="preload" href="/main.4c0fd2c6.js" as="script">

<link rel="preload" href="/1.b5553ae0.js" as="script">

<link rel="preload" href="/2.8f02e627.js" as="script">

<link rel="preload" href="/3.310e6f0e.js" as="script">

<link rel="preload" href="/1c13b173.b1c38be8.js" as="script">

<link rel="preload" href="/8d81086b.ee1bdc8d.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_2ZIa"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides/">Guides</a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/guides/tutorial">Tutorials</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://discuss.qovery.com">Forum</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://console.qovery.com">Web Console</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://www.qovery.com">Home</a><a class="navbar__item navbar__link" title="GitHub" target="_blank" rel="noopener noreferrer" href="https://github.com/Qovery"><i class="feather icon-github"></i> </a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_34Mc moon_313u"></span></div><div class="react-toggle-track-x"><span class="toggle_34Mc sun_1Og-"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/guides/">Guides</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" href="/guides/tutorial">Tutorials</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://discuss.qovery.com">Forum</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://console.qovery.com">Web Console</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://www.qovery.com">Home</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" title="GitHub" target="_blank" rel="noopener noreferrer" href="https://github.com/Qovery"></a></li></ul></div></div></div></nav><div class="main-wrapper"><header class="hero domain-bg domain-bg--default"><div class="container"><div class="hero--category"><a aria-current="page" class="active" href="/guides/engineering/">engineering</a></div><h1 class="header_1mJE">Best Practices and Tips for Writing a Dockerfile</h1><div class="hero--subtitle">In this article, you’ll learn about the key characteristics of Dockerfiles and some best practices to be aware of when you’re writing your own Dockerfiles. Adhering to these guidelines helps you reap the benefits of the containerization movement while minimizing risks in terms of security and performance issues.</div><div class="tags_3AF9"><a class="badge badge--rounded badge--pink" href="/guides/tags/type-engineering/">type: engineering</a><a class="badge badge--rounded badge--primary" href="/guides/tags/technology-docker/">technology: docker</a></div></div></header><main class="container container--l container_1ncB"><aside class="sidebar_1pU0"><section class="avatar_1sJg"><div class="avatar avatar--lg avatar--vertical"><img class="avatar__photo avatar__photo--lg" src="https://github.com/ilmiont.png"><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/ilmiont" target="_blank" rel="author">James Walker</a></div><small class="avatar__subtitle">James Walker is the founder of Heron Web, a UK-based digital agency providing bespoke software development services to SMEs. He has experience managing complete end-to-end web development workflows with DevOps, CI/CD, Docker, and Kubernetes.
</small></div></div></section><section class="table-of-contents tableOfContents_1eMQ"><div class="section"><div class="title">Stats</div><div class="text--secondary text--bold"><i class="feather icon-book"></i> 9 min read</div><div class="text--secondary text--bold"><i class="feather icon-clock"></i> Updated <time pubdate="pubdate" datetime="2021-10-21">Oct 21st, 2021</time></div></div><div class="section"><div class="title">Contents</div><ul class="contents"><li><a href="#overview" class="contents__link">Overview</a></li><li><a href="#what-does-a-dockerfile-do" class="contents__link">What Does a Dockerfile Do?</a></li><li><a href="#best-practices-for-writing-a-dockerfile" class="contents__link">Best Practices for Writing a Dockerfile</a><ul><li><a href="#scan-for-security-vulnerabilities" class="contents__link">Scan for Security Vulnerabilities</a></li><li><a href="#remove-unneeded-dependencies" class="contents__link">Remove Unneeded Dependencies</a></li><li><a href="#secure-injected-credentials" class="contents__link">Secure Injected Credentials</a></li><li><a href="#run-as-a-non-root-user" class="contents__link">Run as a Non-Root User</a></li><li><a href="#track-dockerfile-versions" class="contents__link">Track Dockerfile Versions</a></li><li><a href="#create-stateless-reproducible-containers" class="contents__link">Create Stateless, Reproducible Containers</a></li><li><a href="#handle-multiline-arguments" class="contents__link">Handle Multiline Arguments</a></li><li><a href="#know-the-difference-between-cmd-and-entrypoint" class="contents__link">Know the Difference Between <code>CMD</code> and <code>ENTRYPOINT</code></a></li><li><a href="#use-copy-instead-of-add" class="contents__link">Use <code>COPY</code> Instead of <code>ADD</code></a></li><li><a href="#build-images-without-a-dockerfile-using-stdin" class="contents__link">Build Images without a Dockerfile Using STDIN</a></li></ul></li><li><a href="#conclusion" class="contents__link">Conclusion</a></li></ul></div></section></aside><div class="article_mCV7"><article><div class="markdown"><a aria-hidden="true" tabindex="-1" class="anchor" id="overview"></a><p><a href="https://www.docker.com/">Docker</a> is a high-level virtualization platform that lets you package software as isolated units called <a href="https://www.docker.com/resources/what-container"><em>containers</em></a>. Containers are created from <em>images</em> that include everything needed to run the packaged workload, such as executable binaries and dependency libraries.</p><p><em>Images</em> are defined in <a href="https://docs.docker.com/engine/reference/builder/">Dockerfiles</a>. These resemble sequential scripts that are executed to assemble an image. Dockerfiles can include several kinds of instructions, such as <code>RUN</code>, to execute a command in the container’s file system, and <code>COPY</code> to add files from your host.</p><p>In this article, you’ll learn about the key characteristics of Dockerfiles and some best practices to be aware of when you’re writing your own Dockerfiles. Adhering to these guidelines helps you reap the benefits of the containerization movement while minimizing risks in terms of security and performance issues.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="what-does-a-dockerfile-do"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-does-a-dockerfile-do" title="Direct link to heading">#</a>What Does a Dockerfile Do?</h2><p>Dockerfiles are sets of instructions used to create a Docker image. The Dockerfile format is formalized <a href="https://docs.docker.com/engine/reference/builder">by Docker</a> and founded on a set of keywords that let you manipulate a container’s file system.</p><p>Each keyword is capitalized and followed by specific arguments:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-dockerfile codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">FROM ubuntu:latest</span></div><div class="token-line" style="color:#393A34"><span class="token plain">COPY /source /destination</span></div><div class="token-line" style="color:#393A34"><span class="token plain">RUN touch /example-demo</span></div></div></pre></div></div><p>Three instructions are used here: <code>FROM</code>, which defines the base image from which yours will inherit; <code>COPY</code>, which lets you add files from your host to paths inside the container; and <code>RUN</code>, which is a pass-through for executing commands inside the container’s file system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="best-practices-for-writing-a-dockerfile"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#best-practices-for-writing-a-dockerfile" title="Direct link to heading">#</a>Best Practices for Writing a Dockerfile</h2><p>Writing your own Dockerfiles? Crafting a production-ready Dockerfile is a bit more involved than the minimal example shown above, but it shouldn’t be a daunting exercise. Here’s what you need to know to get the most from your image builds.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="scan-for-security-vulnerabilities"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#scan-for-security-vulnerabilities" title="Direct link to heading">#</a>Scan for Security Vulnerabilities</h3><p>You can perform active scans of your Docker images to identify key vulnerabilities. Several tools are available, including <a href="https://docs.docker.com/engine/scan">Docker Scan</a>, which is built into the Docker CLI.</p><p>Scans assess the operating system packages installed in the image and match them against known lists of Common Vulnerabilities and Exposures (CVEs). Suggested remediation steps are provided for each detected problem.</p><p>You should utilize a container scanning engine as a best-practice step to avoid issues slipping into production unseen. Add a scan to the image build stage of your CI pipeline to protect yourself from developers unwittingly adding risky packages to your image.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="remove-unneeded-dependencies"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#remove-unneeded-dependencies" title="Direct link to heading">#</a>Remove Unneeded Dependencies</h3><p>Docker images should be as minimal as possible. Streamlining your builds to include just the bare essentials makes for smaller image sizes, faster builds, and a reduced attack surface. You’ll also use less network bandwidth when transferring images to registries and hosting providers.</p><p>Don’t install any packages or libraries that your application doesn’t actually use. As you’ll rarely interact with running containers yourself, there’s no point in adding common CLI utilities on the off chance you might want them later. Maintaining this practice will help your Dockerfile stay focused on containerizing your application instead of an entire OS environment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="secure-injected-credentials"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#secure-injected-credentials" title="Direct link to heading">#</a>Secure Injected Credentials</h3><p>This is one of the most common and dangerous Dockerfile issues. It can be tempting to copy config files as part of your build. This is an anti-pattern that should be avoided.</p><p>Anything copied as part of your Dockerfile is baked into your image and accessible to anyone who can access it. If you add a file containing a database password, you’ve just exposed those secrets to all the users with access to your image registry.</p><p>Configuration keys and secret sensitive data must be supplied to individual <em>containers</em>, not the images they’re built from. Use <a href="https://docs.docker.com/engine/reference/commandline/run/#set-environment-variables--e---env---env-file">environment variables</a>, config files mounted into <a href="https://docs.docker.com/storage/volumes">a volume</a>, or Docker’s dedicated <a href="https://docs.docker.com/engine/swarm/secrets">secrets mechanism</a> to inject data when containers start. This avoids accidental information exposure and ensures your images are reusable across environments.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="run-as-a-non-root-user"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#run-as-a-non-root-user" title="Direct link to heading">#</a>Run as a Non-Root User</h3><p>Docker containers usually default to running their processes as the <code>root</code> user. Using <code>root</code> to run your processes means that a successful exploit of a web server inside your container could let an attacker take control of the container or even your host machine—the <code>root</code> user in the container is the same as the <code>root</code> on your host.</p><p>The <code>USER</code> instruction directs Docker to run a container’s command as a specified non-root user. It accepts the name or ID of a user and group. All subsequent <code>RUN</code>, <code>CMD</code>, and <code>ENTRYPOINT</code> instructions in your Dockerfile will run as that account.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-dockerfile codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">USER demo-user:example-group</span></div></div></pre></div></div><p>For even greater isolation, you can <a href="https://docs.docker.com/engine/security/rootless">run the Docker daemon</a> as a non-root user. This uses namespace remapping to completely avoid the use of the <code>root</code> on the host. Even if a process breaks out of your container, it won’t be able to fully compromise your machine. The rootless mode requires a special configuration and does not work with all Docker features.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="track-dockerfile-versions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#track-dockerfile-versions" title="Direct link to heading">#</a>Track Dockerfile Versions</h3><p>Dockerfiles are text files that can change over time, so you should commit them to version control. Some organizations keep Dockerfiles in the same repository as their code, facilitating one <code>git pull</code> followed by a <code>docker build</code> to build the image, whereas others choose to use a separate repository. In the latter case, you’d need to pull the code repository separately before building your image.</p><p>Using version control lets you track, revert, and review the changes you make to your Dockerfile. You’ll have a useful starting point to debug issues if you build a new image and then find that it fails when deployed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="create-stateless-reproducible-containers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-stateless-reproducible-containers" title="Direct link to heading">#</a>Create Stateless, Reproducible Containers</h3><p>Docker containers should be ephemeral and completely stateless. Images need to define reproducible builds: the exact same image should be built each time you run <code>docker build</code> with a single Dockerfile. This is aided by specifying exact versions of the packages you install, as <code>latest</code>, <code>release</code>, or even <code>v1</code> could change significantly in the future.</p><p>Another trait of reproducible builds is the absence of side effects. Builds are meant to create containers, not to update data in your database, push artifacts into your CI system, or send you emails about progress. Those are all jobs to be performed in a separate stage in your pipeline.</p><p>Heeding these practices ensures that the image you built through <code>docker build</code> in a week will be the same as the one you built through <code>docker build</code> today. This makes it much easier to back up your data. Docker registries can quickly become large, but properly built images don’t necessarily need to be archived. If you do lose your registry, you’ll be able to quickly rebuild replicas of your images from the Dockerfiles in your source repositories.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="handle-multiline-arguments"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#handle-multiline-arguments" title="Direct link to heading">#</a>Handle Multiline Arguments</h3><p>It’s inevitable that some Dockerfile instructions will become long and unwieldy. This is especially true of <code>RUN</code> instructions that execute commands within your container. It’s best practice to combine as many commands as possible into a single <code>RUN</code> instruction as this helps <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#minimize-the-number-of-layers">facilitate layer caching</a>. The drawback is having some very long lines in your Dockerfile.</p><p>To mitigate this issue, you should combine <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#sort-multi-line-arguments">multiple lines</a> with backslashes. This makes your Dockerfile easier to read so newcomers can quickly scan through the instructions. Docker suggests that you sort lines alphabetically; while this won’t be possible in all command sequences, it works well for lists of packages and other downloaded files.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-dockerfile codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">RUN apt-get update &amp;&amp; \</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    apt-get install -y apache2 &amp;&amp;\</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    service apache2 restart</span></div></div></pre></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="know-the-difference-between-cmd-and-entrypoint"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#know-the-difference-between-cmd-and-entrypoint" title="Direct link to heading">#</a>Know the Difference Between <code>CMD</code> and <code>ENTRYPOINT</code></h3><p><code>CMD</code> and <code>ENTRYPOINT</code> are two instructions used to define the process that’s run in your container. <code>ENTRYPOINT</code> sets the process that’s executed when the container first starts. This defaults to a shell, <code>/bin/sh</code>. <code>CMD</code> provides the default arguments for the <code>ENTRYPOINT</code> process.</p><p>The following pair of instructions results in <code>date +%A</code> running when the container is created:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-dockerfile codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">ENTRYPOINT [&quot;date&quot;]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;+%A&quot;]</span></div></div></pre></div></div><p>Setting a custom <code>ENTRYPOINT</code> lets image users quickly access your CLI binaries without having to specify their full path. When you use <code>docker run</code>, Docker overrides the <code>CMD</code> but reuses the <code>ENTRYPOINT</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-dockerfile codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">docker run my-image:latest +%B</span></div></div></pre></div></div><p>The above command would start the container and run <code>date +%B</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="use-copy-instead-of-add"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-copy-instead-of-add" title="Direct link to heading">#</a>Use <code>COPY</code> Instead of <code>ADD</code></h3><p>Dockerfiles support two similar but subtly different instructions. <code>ADD</code> and <code>COPY</code> both <a href="https://docs.docker.com/engine/reference/builder/#add">let you add</a> existing files to your image; whereas <code>COPY</code> only works with local files on your host, <code>ADD</code> also accepts remote URLs and automatically extracts <code>tar</code> archives. A simple <code>ADD archive.tar</code> has very different results from <code>COPY archive.tar</code> because the version using <code>ADD</code> will copy the <em>contents</em> of the archive, not the archive file itself.</p><p>Because <code>ADD</code> possesses this extra magic, it’s advisable to use <code>COPY</code> as your go-to when copying content from your file system. <code>ADD</code> creates unnecessary ambiguity, especially when referencing archive files, which means it should be reserved for use when it’s really needed. This helps you communicate your intentions to other contributors who might work with your Dockerfile.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="build-images-without-a-dockerfile-using-stdin"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#build-images-without-a-dockerfile-using-stdin" title="Direct link to heading">#</a>Build Images without a Dockerfile Using STDIN</h3><p>You can build images without a Dockerfile. While not strictly a Dockerfile best practice, <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#pipe-dockerfile-through-stdin">this technique</a> is useful when you’re dynamically creating one-off utility images as part of a CI pipeline.</p><p>Use <code>docker build -</code> to have Docker accept a Dockerfile on <code>stdin</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-dockerfile codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">echo -e &#x27;FROM ubuntu:latest\nRUN echo &quot;Built from stdin&quot;&#x27; | docker build -</span></div></div></pre></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="conclusion"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusion" title="Direct link to heading">#</a>Conclusion</h2><p>Dockerfiles are a set of instructions that Docker uses to build images. They provide a standardized, reproducible, and auditable mechanism for creating container images. While the syntax is simple, it’s important to keep common gotchas and best practices in mind so you don’t hit unexpected issues in production.</p><p>Keep your Dockerfiles as small as possible, actively scan them for security vulnerabilities, and ensure you’re not baking in secrets or config keys. These simple steps will ensure your Dockerfiles stay reusable, resilient, and secure against unintentional information disclosure.</p><p>When it’s time to launch your images into production, <a href="https://www.qovery.com">Qovery</a> is a platform that can deploy your Dockerfile straight to AWS. Install the <a href="https://hub.qovery.com/docs/using-qovery/interface/cli">Qovery CLI</a>, initialize a new project, and then push your code to your Git repository. Qovery will automatically launch your Dockerfile in the cloud, exposing the <a href="https://docs.docker.com/engine/reference/builder/#expose">ports you’ve specified</a> in your Dockerfile. This removes the burden of maintaining a Docker Engine installation on your own servers.</p><a class="jump-to jump-to--undefined" href="/guides/tutorial/"><div class="jump-to--inner"><div class="jump-to--inner-2"><div class="jump-to--main">Tutorial</div><div class="jump-to--right"><i class="feather icon-chevron-right arrow"></i></div></div></div></a></div></article></div></main></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col col--5 footer__col"><div class="margin-bottom--md"></div><div class="margin-bottom--md"><p>Qovery combines the power of Kubernetes, the reliability of AWS, and the simplicity of Heroku to deploy your apps.</p></div><div><a href="https://github.com/qovery" target="_blank"><i class="feather icon-github" alt="Qovery&#x27;s Github Repo"></i></a>    <a href="https://www.linkedin.com/company/qovery/" target="_blank"><i class="feather icon-rss" alt="Qovery&#x27;s Linkedin"></i></a>    <a href="https://twitter.com/qovery_" target="_blank"><i class="feather icon-twitter" alt="Qovery&#x27;s Twitter"></i></a>    <a href="https://discord.qovery.com" target="_blank"><i class="feather icon-message-circle" alt="Qovery&#x27;s Discord"></i></a></div></div><div class="col footer__col"><h4 class="footer__title">Resources</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Documentation</a></li><li class="footer__item"><a aria-current="page" class="footer__link-item active" href="/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/guides/tutorial">Tutorials</a></li><li class="footer__item"><a aria-current="page" class="footer__link-item active" href="/guides/engineering">Engineering</a></li><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/pricing" href="https://www.qovery.com/pricing">Pricing</a></li><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/enterprise" href="https://www.qovery.com/enterprise">Enterprise</a></li><li class="footer__item"><a class="footer__link-item" to="https://api-doc.qovery.com" href="https://api-doc.qovery.com">API</a></li><li class="footer__item"><a class="footer__link-item" to="https://github.com/Qovery" href="https://github.com/Qovery">Github</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" to="https://discord.qovery.com" href="https://discord.qovery.com">Discord</a></li><li class="footer__item"><a class="footer__link-item" to="https://community.qovery.com" href="https://community.qovery.com">Forum</a></li><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/community-call" href="https://www.qovery.com/community-call">Community call</a></li><li class="footer__item"><a class="footer__link-item" to="https://shop.qovery.com" href="https://shop.qovery.com">Goodies</a></li><li class="footer__item"><a class="footer__link-item" to="https://roadmap.qovery.com" href="https://roadmap.qovery.com">Roadmap</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/blog" href="https://www.qovery.com/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" to="https://jobs.qovery.com" href="https://jobs.qovery.com">Jobs</a></li><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/team" href="https://www.qovery.com/team">Team</a></li><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/investors" href="https://www.qovery.com/investors">Investors</a></li><li class="footer__item"><a class="footer__link-item" to="https://www.qovery.com/contact" href="https://www.qovery.com/contact">Contact</a></li></ul></div></div><div class="text--center"><small>© 2021 DESIGNED BY QOVERY | BACKED BY TECHSTARS | PROUD SILVER MEMBER OF CNCF AND LINUX FOUNDATION | QOVERY BY BIRDSIGHT - ALL RIGHTS RESERVED</small><br></div></div></footer>
</div>

<script src="/styles.ae5b223a.js"></script>

<script src="/runtime~main.d21bfdd8.js"></script>

<script src="/main.4c0fd2c6.js"></script>

<script src="/1.b5553ae0.js"></script>

<script src="/2.8f02e627.js"></script>

<script src="/3.310e6f0e.js"></script>

<script src="/1c13b173.b1c38be8.js"></script>

<script src="/8d81086b.ee1bdc8d.js"></script>


</body>
</html>