---
last_modified_on: "2020-04-21"
$schema: "/.meta/.schemas/guides.json"
title: Adding a database
description: How to add a database to your application
series_position: 2
author_github: https://github.com/evoxmusic
tags: ["type: guide"]
---
import Steps from '@site/src/components/Steps';
import Assumptions from '@site/src/components/Assumptions';
import Alert from '@site/src/components/Alert';

Every application need to store data in a database at some point. In this guide, you'll learn how to get a production grade database from Qovery in just a few seconds.

<Assumptions>

* You have installed the [Qovery CLI][guides.deploy-your-first-application]
* You have already deployed an application with Qovery

</Assumptions>

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/guides/getting-started/adding-a-database.md.erb
-->

## Tutorial
Qovery supports most popular SQL and NoSQL databases (You can see the complete list [here][docs.databases]). In this tutorial we will deploy a PostgreSQL database.

<Steps headingDepth={3}>
<ol>

<li>

### Configuration
To add a PostgreSQL to our application we simply need to put three mandatory lines in our `.qovery.yml` file as follow:

```yaml
...
databases:
- type: postgresql # database type
  version: "11.5" # database version
  name: my-db # database name (must be unique)
...
```

<Alert type="info">
Up to 16 databases can be added per application
</Alert>

Our complete `.qovery.yml` looks like this

```yaml
application:
  name: simple-example-node
  project: getting-started
  cloud_region: aws/us-west-2
  publicly_accessible: true
databases:
- type: postgresql
  version: "11.5"
  name: my-db
routers:
- name: main
  routes:
  - application_name: simple-example-node
    paths:
    - /
```

To start the database you need to commit and push the modification of your `.qovery.yml` file.

```bash
$ git add .qovery.yml
$ git commit -m "Add PostgreSQL database to .qovery.yml"
$ git push -u origin master
```

Well done, your database will be ready within a few seconds. To check the readiness status:

```bash
$ qovery status
```

</li>
<li>

### Connect
Now, we need to connect our application to our database. The credentials (URI, Username, Password ...) are available through [environment variables][docs.environment-variables]. They are injected by Qovery when your application runs.

First, we need to list all the environment variables available for our application:

```bash
# List all environment variables
$ qovery application env list
# By adding the arg option -c you can see the value of hidden fields
```

Output

```bash
SCOPE    | KEY                                                      | VALUE
BUILT_IN | QOVERY_JSON_B64                                          | <base64>
BUILT_IN | QOVERY_BRANCH_NAME                                       | master
BUILT_IN | QOVERY_IS_PRODUCTION                                     | false
BUILT_IN | QOVERY_APPLICATION_SIMPLE_EXAMPLE_NODE_HOSTNAME          | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_DATABASE                           | postgres
BUILT_IN | QOVERY_DATABASE_MY_DB_PASSWORD                           | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_USERNAME                           | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_PORT                               | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_FQDN                               | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_HOST                               | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_CONNECTION_URI_WITHOUT_CREDENTIALS | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_CONNECTION_URI                     | <hidden>
BUILT_IN | QOVERY_DATABASE_MY_DB_VERSION                            | 11.5
BUILT_IN | QOVERY_DATABASE_MY_DB_TYPE                               | POSTGRESQL
BUILT_IN | QOVERY_DATABASE_MY_DB_NAME                               | my-db
```

To connect our NodeJS application to our PostgreSQL database, we only have to:

- Use the NodeJS PostgreSQL client ([pg](https://node-postgres.com/features/connecting))
- Use `QOVERY_DATABASE_MY_DB_CONNECTION_URI` into our code

Add the `pg` dependency into `package.json`

```json
{
  /* ... */
  "dependencies": {
    /* ... */
    "pg": "^7.17.0"
  }
}
```

Connect our application to PostgreSQL ([see documentation](https://node-postgres.com/features/connecting))

```javascript
const { Pool } = require('pg')

const pool = new Pool({
  connectionString: process.env.QOVERY_DATABASE_MY_DB_CONNECTION_URI,
})

// your can use your connection pool now ...
```

Nothing more, well done! You can now be able to use your database.

</li>
<li>

### Deploy
Commit, and push your code, and you are done. Your application will be deployed.

```bash
$ git add app.js
$ git commit -m "Update my code to use PostgreSQL"
$ git push -u origin master
```

What the deployment status

```bash
$ qovery status
```

</li>
</ol>
</Steps>

## Next Steps

Congratulations, your application is connected to a PostgreSQL database. Now we will see how to add your custom domain to your service.


[docs.databases]: /docs/using-qovery/configuration/databases/
[docs.environment-variables]: /docs/using-qovery/configuration/environment-variables/
[guides.deploy-your-first-application]: /guides/getting-started/deploy-your-first-application/
